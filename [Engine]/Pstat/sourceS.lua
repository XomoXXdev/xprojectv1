local piros = "#dc143c"
local feher = "#ffffff"

--[[
	A rendszer kiírja, hogy a rendszer elindult, vagy leállt.
]]--
function info ( csomag )
	if ( csomag == getThisResource() ) then
		outputDebugString ( "Kiegészítő csomag aktív! ( " .. getResourceName(csomag) .. " )" )
	end
end
addEventHandler( "onResourceStart", getRootElement(), info )

function warning ( csomag )
	if ( csomag == getThisResource() ) then
		outputDebugString ( "Kiegészítő csomag inaktív! ( " .. getResourceName(csomag) .. " )" )
	end
end
addEventHandler( "onResourceStop", getRootElement(), warning )	

function chattorol(jatekos)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
	outputChatBox("#FFAA00", jatekos, 255,0,0,true)
end
addCommandHandler("cc", chattorol)


addEvent("server:receiveCursor", true)
addEventHandler("server:receiveCursor", root,
	function(e, positions)
       local x,y,z = positions[1], positions[2], positions[3]
       setElementData(e, "lookAt", {x,y,z})
	end
)

addEventHandler("onElementDataChange", root,
	function(dataName)
		if isElement(source) and getElementType(source) == "player" then
			if dataName == "lookAt" then
				for k,v in ipairs(getElementsByType("player")) do
					local positions = getElementData(source, "lookAt") or {0,0,0}
					triggerClientEvent(v, "client:receiveCursor", v, source, positions)
				end
			end
		end
	end
)

local playerTimers = {}
function sendStats(player)
	if isElement(player) then
		local columns, rows = getPerformanceStats("Lua timing")
		triggerClientEvent(player, "receiveServerStat", player, columns, rows)
		playerTimers[player] = setTimer(sendStats, 1000, 1, player)
	end
end

addEvent("getServerStat", true)
addEventHandler("getServerStat", root, function()
	sendStats(client)
end)

addEvent("destroyServerStat", true)
addEventHandler("destroyServerStat", root, function()
	if isTimer(playerTimers[client]) then
		killTimer(playerTimers[client])
		playerTimers[client] = nil
	end
end)